# Project created via BDStudio
# https://eszesbalint.github.io/bdstudio
function uhcp:relics/durability/reset
tag @s add UHCP_SentryOwner
summon block_display ~ ~ ~ {teleport_duration:1,Tags:["UHCP_Turret","UHCP_Summon","UHCP_TurretOrigin","UHCP_New"],Passengers:[{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretHead"],teleport_duration:2,block_state:{Name:"minecraft:light_gray_glazed_terracotta",Properties:{facing:"east"}},transformation:[1.0000f,0.0000f,0.0000f,-0.4375f,0.0000f,0.5000f,0.0000f,1.0625f,0.0000f,0.0000f,0.5400f,-0.2675f,0.0000f,0.0000f,0.0000f,1.0000f]},{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretHead"],teleport_duration:2,block_state:{Name:"minecraft:polished_blackstone_button",Properties:{face:"ceiling",facing:"east",powered:"false"}},transformation:[2.0000f,0.0000f,0.0000f,-1.2500f,0.0000f,1.0000f,0.0000f,0.6875f,0.0000f,0.0000f,0.9000f,-0.4475f,0.0000f,0.0000f,0.0000f,1.0000f]},{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretHead","UHCP_TurretCannon","UHCP_New"],teleport_duration:2,block_state:{Name:"minecraft:chiseled_quartz_block"},transformation:[-0.0000f,1.0000f,0.0000f,0.1250f,-0.5000f,-0.0000f,0.0000f,1.6250f,0.0000f,0.0000f,0.4500f,-0.2225f,0.0000f,0.0000f,0.0000f,1.0000f]},{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretHead"],teleport_duration:2,block_state:{Name:"minecraft:smooth_quartz"},transformation:[0.2000f,0.0000f,0.0000f,-0.0625f,0.0000f,0.7000f,0.0000f,1.0000f,0.0000f,0.0000f,0.6300f,-0.3125f,0.0000f,0.0000f,0.0000f,1.0000f]},{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretHead"],teleport_duration:2,block_state:{Name:"minecraft:smooth_quartz"},transformation:[0.2000f,0.0000f,0.0000f,-0.6250f,0.0000f,0.7000f,0.0000f,1.0000f,0.0000f,0.0000f,0.6300f,-0.3125f,0.0000f,0.0000f,0.0000f,1.0000f]},{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretBase"],block_state:{Name:"minecraft:smooth_stone_slab",Properties:{type:"bottom"}},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,0.5000f,0.0000f,0.0000f,0.0000f,0.0000f,1.5000f,-0.7500f,0.0000f,0.0000f,0.0000f,1.0000f]},{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretBase"],block_state:{Name:"minecraft:smooth_stone_slab",Properties:{type:"bottom"}},transformation:[1.5000f,0.0000f,0.0000f,-0.7500f,0.0000f,0.5500f,0.0000f,0.0000f,0.0000f,0.0000f,1.1000f,-0.5500f,0.0000f,0.0000f,0.0000f,1.0000f]},{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretBase"],block_state:{Name:"minecraft:smooth_stone_slab",Properties:{type:"bottom"}},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,0.5500f,0.0000f,0.1875f,0.0000f,0.0000f,0.8000f,-0.4000f,0.0000f,0.0000f,0.0000f,1.0000f]},{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretBase"],block_state:{Name:"minecraft:smooth_stone_slab",Properties:{type:"bottom"}},transformation:[0.8000f,0.0000f,0.0000f,-0.4000f,0.0000f,0.5000f,0.0000f,0.2500f,0.0000f,0.0000f,1.0000f,-0.5000f,0.0000f,0.0000f,0.0000f,1.0000f]},{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretBase"],block_state:{Name:"minecraft:smooth_stone_slab",Properties:{type:"bottom"}},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,0.5000f,0.0000f,0.5000f,0.0000f,0.0000f,0.2000f,-0.3750f,0.0000f,0.0000f,0.0000f,1.0000f]},{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretBase"],block_state:{Name:"minecraft:smooth_stone_slab",Properties:{type:"bottom"}},transformation:[1.0000f,0.0000f,0.0000f,-0.5000f,0.0000f,0.5000f,0.0000f,0.5000f,0.0000f,0.0000f,0.2000f,0.1875f,0.0000f,0.0000f,0.0000f,1.0000f]},{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretBase"],block_state:{Name:"minecraft:polished_blackstone_brick_wall",Properties:{up:"true"}},transformation:[0.0000f,-0.0000f,-0.4000f,0.1875f,-0.4000f,-0.0000f,0.0000f,0.8125f,-0.0000f,1.0000f,-0.0000f,-0.5000f,0.0000f,0.0000f,0.0000f,1.0000f]},{id:"minecraft:block_display",Tags:["UHCP_Turret","UHCP_TurretBase"],block_state:{Name:"minecraft:polished_blackstone_brick_wall",Properties:{up:"true"}},transformation:[0.0000f,-0.0000f,-0.4500f,0.2500f,-0.7500f,-0.0000f,0.0000f,1.1875f,-0.0000f,0.5000f,-0.0000f,-0.2500f,0.0000f,0.0000f,0.0000f,1.0000f]}]}
summon minecraft:giant ~ -100 ~ {PersistenceRequired:1b,NoAI:1b,Silent:1b,Health:15f,Attributes:[{Name:"generic.max_health",Base:15},{Name:"generic.scale",Base:0.166}],active_effects:[{id:"minecraft:invisibility",amplifier:0b,duration:20000000,show_particles:0b}],Tags:["UHCP_TurretHitbox","UHCP_New"]}

scoreboard players add %global uhcp_id 1
scoreboard players operation @e[tag=UHCP_New] uhcp_id = %global uhcp_id

execute as @e[tag=UHCP_New] run scoreboard players operation @s uhcp_team = @e[tag=UHCP_SentryOwner,sort=nearest,limit=1] uhcp_team
execute if items entity @s weapon.mainhand *[minecraft:custom_data~{uhcp_radiant:1b}] run tag @e[tag=UHCP_Turret,tag=UHCP_New] add UHCP_WellEngineered

playsound item.armor.equip_netherite master @a[distance=..4] ~ ~ ~ 1 1 1
playsound item.armor.equip_netherite master @a[distance=..4] ~ ~ ~ 1 1 1
playsound item.mace.smash_ground master @a[distance=..4] ~ ~ ~ 1 0.8 1
playsound block.beacon.power_select master @a[distance=..4] ~ ~ ~ 1 0.8 1
particle block{block_state: "minecraft:quartz_block"} ~ ~ ~ 0.5 0.5 0.5 0.1 10 normal
particle minecraft:trial_spawner_detection ~ ~ ~ 0.25 0.25 0.25 0.1 40 normal
particle flash ~ ~ ~ 0.5 0.5 0.5 0.1 10 normal
tag @s remove UHCP_SentryOwner
tag @e remove UHCP_New
